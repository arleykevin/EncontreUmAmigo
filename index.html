<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EncontreUmAmigo</title>
    
    <!-- React e ReactDOM via CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel para entender JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Estilos Customizados -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .animate-fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* Esconder barra de rolagem mas manter funcionalidade */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- CONFIGURA√á√ÉO DA API ---
        // Coloque sua chave da API Gemini aqui para as fun√ß√µes de IA funcionarem
        const apiKey = ""; 

        // --- √çCONES SVG (Para n√£o depender de bibliotecas externas neste arquivo √∫nico) ---
        const Icons = {
            Dog: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10 5.172C10 3.782 8.21 2.923 6.91 3.64L5.15 4.66c-.66.38-1.07 1.07-1.12 1.83l-.15 2.14c-.05.74.27 1.48.86 1.95l.93.73c.43.34.6.9.44 1.42l-.24.78a1.5 1.5 0 0 0 .97 1.89l.86.26c.46.14.96.06 1.34-.23l1.83-1.37"/><path d="M16 8h2.38c.62 0 1.15.42 1.3.93l.6 2.09c.26.93 1.25 1.48 2.17 1.23.92-.26 1.48-1.25 1.23-2.17l-.6-2.09A3.37 3.37 0 0 0 20.38 6H17.5a1.5 1.5 0 0 1-1.37-2.06l.75-2.06A1.5 1.5 0 0 0 15.48.56l-1.6 1.07a1.5 1.5 0 0 0-.6 1.63L14.6 7a1.5 1.5 0 0 1-1.5 1.5h-1.63"/><path d="M15.12 11.03a2.5 2.5 0 1 0-3.6 3.6l5.77 5.76a2.5 2.5 0 0 0 3.53 0l1.32-1.3a2.5 2.5 0 0 0 0-3.54l-7.02-4.52Z"/><path d="M6.3 19.3a2.5 2.5 0 0 1 1.62-.2l2.64.78c1.3.38 2.68-.27 3.25-1.54l.32-.72"/></svg>,
            Cat: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21S3 17.9 3 13.44C3 12.24 3.43 11.07 4 10c0 0-1.82-6.42-.42-7 1.39-.58 4.64.26 6.42 2.26.65-.17 1.33-.26 2-.26Z"/></svg>,
            Search: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            Heart: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>,
            MapPin: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
            Phone: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.12 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>,
            Mail: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>,
            Menu: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>,
            X: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
            CheckCircle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>,
            PlusCircle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/></svg>,
            Camera: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>,
            Sparkles: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></svg>,
            Send: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></svg>,
            Loader: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>
        };

        // --- DADOS MOCKADOS ---
        const INITIAL_PETS = [
            {
                id: 1,
                name: "Pa√ßoca",
                type: "dog",
                breed: "Vira-lata Caramelo",
                age: "2 anos",
                gender: "Macho",
                size: "M√©dio",
                location: "S√£o Paulo, SP",
                image: "https://images.unsplash.com/photo-1593134257782-e89567577d1a?auto=format&fit=crop&q=80&w=1000",
                description: "Pa√ßoca √© um vira-lata cheio de energia. Adora correr no parque e √© muito soci√°vel com crian√ßas.",
                owner: "Mariana Silva",
                contact: "(11) 99999-1234",
                vaccinated: true,
                castrated: true
            },
            {
                id: 2,
                name: "Luna",
                type: "cat",
                breed: "Siam√™s",
                age: "6 meses",
                gender: "F√™mea",
                size: "Pequeno",
                location: "Rio de Janeiro, RJ",
                image: "https://images.unsplash.com/photo-1513245543132-31f507417b26?auto=format&fit=crop&q=80&w=1000",
                description: "Luna √© uma gatinha muito carinhosa e tranquila. Ideal para apartamentos.",
                owner: "Carlos Eduardo",
                contact: "(21) 98888-5678",
                vaccinated: true,
                castrated: false
            },
            {
                id: 3,
                name: "Thor",
                type: "dog",
                breed: "Golden Retriever",
                age: "3 anos",
                gender: "Macho",
                size: "Grande",
                location: "Curitiba, PR",
                image: "https://images.unsplash.com/photo-1552053831-71594a27632d?auto=format&fit=crop&q=80&w=1000",
                description: "Thor √© um gigante gentil. Muito obediente, adora nadar e buscar bolinhas.",
                owner: "Ana Souza",
                contact: "(41) 97777-4321",
                vaccinated: true,
                castrated: true
            },
            {
                id: 4,
                name: "Mia",
                type: "cat",
                breed: "Persa",
                age: "4 anos",
                gender: "F√™mea",
                size: "M√©dio",
                location: "Belo Horizonte, MG",
                image: "https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?auto=format&fit=crop&q=80&w=1000",
                description: "Mia √© uma rainha. Gosta de lugares altos e de dormir a tarde toda. Muito limpa.",
                owner: "Roberto Lima",
                contact: "(31) 96666-9876",
                vaccinated: true,
                castrated: true
            },
            {
                id: 5,
                name: "Bob",
                type: "dog",
                breed: "Bulldog Franc√™s",
                age: "1 ano",
                gender: "Macho",
                size: "Pequeno",
                location: "S√£o Paulo, SP",
                image: "https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?auto=format&fit=crop&q=80&w=1000",
                description: "Bob √© brincalh√£o e um pouco teimoso. Adora um colinho e ronca quando dorme.",
                owner: "Fernanda Dias",
                contact: "(11) 95555-1122",
                vaccinated: true,
                castrated: false
            }
        ];

        // --- HELPER DO GEMINI API ---
        const callGemini = async (prompt, systemInstruction = "") => {
            if (!apiKey) {
                return "‚ö†Ô∏è Configure a chave da API no c√≥digo para usar a IA.";
            }
            try {
                const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: systemInstruction ? { parts: [{ text: systemInstruction }] } : undefined
                };

                const response = await fetch(
                `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                }
                );

                if (!response.ok) throw new Error('Falha na API Gemini');
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || "N√£o foi poss√≠vel gerar resposta.";
            } catch (error) {
                console.error("Erro Gemini:", error);
                return "Desculpe, a IA est√° indispon√≠vel no momento.";
            }
        };

        // --- COMPONENTES ---

        const Badge = ({ children, color = "blue" }) => {
            const colors = {
                blue: "bg-blue-100 text-blue-800",
                green: "bg-green-100 text-green-800",
                purple: "bg-purple-100 text-purple-800",
                orange: "bg-orange-100 text-orange-800",
                indigo: "bg-indigo-100 text-indigo-800",
            };
            return (
                <span className={`px-2 py-1 rounded-full text-xs font-semibold ${colors[color] || colors.blue}`}>
                {children}
                </span>
            );
        };

        const Modal = ({ pet, onClose }) => {
            if (!pet) return null;

            return (
                <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto">
                <div className="bg-white rounded-2xl max-w-2xl w-full shadow-2xl overflow-hidden animate-fade-in relative">
                    <button 
                    onClick={onClose}
                    className="absolute top-4 right-4 bg-white/80 p-2 rounded-full hover:bg-white transition-colors z-10"
                    >
                    <Icons.X className="w-6 h-6 text-gray-700" />
                    </button>
                    
                    <div className="flex flex-col md:flex-row h-full">
                    <div className="md:w-1/2 h-64 md:h-auto relative">
                        <img 
                        src={pet.image} 
                        alt={pet.name} 
                        className="w-full h-full object-cover"
                        />
                        <div className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4">
                        <h2 className="text-3xl font-bold text-white">{pet.name}</h2>
                        <p className="text-white/90 flex items-center gap-1">
                            <Icons.MapPin className="w-4 h-4" /> {pet.location}
                        </p>
                        </div>
                    </div>
                    
                    <div className="md:w-1/2 p-6 flex flex-col overflow-y-auto max-h-[80vh]">
                        <div className="flex items-center gap-2 mb-4">
                        <Badge color="purple">{pet.breed}</Badge>
                        <Badge color="blue">{pet.age}</Badge>
                        <Badge color="orange">{pet.gender}</Badge>
                        </div>

                        <h3 className="text-lg font-semibold text-gray-800 mb-2">Sobre o {pet.name}</h3>
                        <p className="text-gray-600 mb-6 leading-relaxed whitespace-pre-wrap">
                        {pet.description}
                        </p>

                        <div className="grid grid-cols-2 gap-4 mb-6">
                        <div className="flex items-center gap-2 text-sm text-gray-700">
                            <Icons.CheckCircle className={`w-4 h-4 ${pet.vaccinated ? 'text-green-500' : 'text-gray-300'}`} />
                            Vacinado
                        </div>
                        <div className="flex items-center gap-2 text-sm text-gray-700">
                            <Icons.CheckCircle className={`w-4 h-4 ${pet.castrated ? 'text-green-500' : 'text-gray-300'}`} />
                            Castrado
                        </div>
                        </div>

                        <div className="mt-auto border-t pt-6">
                        <h4 className="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3">Contato para Ado√ß√£o</h4>
                        <div className="flex items-center gap-3 mb-2">
                            <div className="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-lg">
                            {pet.owner.charAt(0)}
                            </div>
                            <div>
                            <p className="font-medium text-gray-900">{pet.owner}</p>
                            <p className="text-xs text-gray-500">Protetor Respons√°vel</p>
                            </div>
                        </div>
                        
                        <div className="grid grid-cols-2 gap-3 mt-4">
                            <button className="flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg font-medium transition-colors">
                            <Icons.Phone className="w-5 h-5" /> WhatsApp
                            </button>
                            <button className="flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg font-medium transition-colors">
                            <Icons.Mail className="w-5 h-5" /> Email
                            </button>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                </div>
            );
        };

        const AdvisorModal = ({ onClose }) => {
            const [messages, setMessages] = useState([
                { role: 'assistant', text: 'Ol√°! Sou a IA do EncontreUmAmigo. üêæ Me conte como √© sua rotina e onde voc√™ mora, e eu ajudarei a encontrar o pet ideal para voc√™!' }
            ]);
            const [input, setInput] = useState('');
            const [loading, setLoading] = useState(false);
            const scrollRef = useRef(null);

            useEffect(() => {
                if (scrollRef.current) {
                scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
                }
            }, [messages]);

            const handleSend = async () => {
                if (!input.trim()) return;
                
                const userMsg = { role: 'user', text: input };
                setMessages(prev => [...prev, userMsg]);
                setInput('');
                setLoading(true);

                const systemPrompt = "Voc√™ √© um consultor de ado√ß√£o de animais experiente e amig√°vel do app 'EncontreUmAmigo'. Seu objetivo √© recomendar tipos de animais (c√£es, gatos, ra√ßas espec√≠ficas) com base no estilo de vida do usu√°rio. Seja conciso, use emojis e fale portugu√™s.";
                
                const chatHistory = messages.map(m => `${m.role === 'user' ? 'Usu√°rio' : 'Assistente'}: ${m.text}`).join('\n');
                const fullPrompt = `${chatHistory}\nUsu√°rio: ${input}\nAssistente:`;

                const responseText = await callGemini(fullPrompt, systemPrompt);

                setMessages(prev => [...prev, { role: 'assistant', text: responseText }]);
                setLoading(false);
            };

            return (
                <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-fade-in flex flex-col h-[600px]">
                    <div className="bg-indigo-600 p-4 flex justify-between items-center text-white">
                    <div className="flex items-center gap-2">
                        <Icons.Sparkles className="w-5 h-5 text-yellow-300" />
                        <h3 className="font-bold">Conselheiro Virtual</h3>
                    </div>
                    <button onClick={onClose} className="hover:bg-indigo-700 p-1 rounded-full">
                        <Icons.X className="w-5 h-5" />
                    </button>
                    </div>

                    <div className="flex-1 overflow-y-auto p-4 bg-gray-50 space-y-4" ref={scrollRef}>
                    {messages.map((msg, idx) => (
                        <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                        <div className={`max-w-[80%] p-3 rounded-2xl text-sm ${
                            msg.role === 'user' 
                            ? 'bg-indigo-600 text-white rounded-br-none' 
                            : 'bg-white text-gray-800 shadow-sm border border-gray-100 rounded-bl-none'
                        }`}>
                            {msg.text}
                        </div>
                        </div>
                    ))}
                    {loading && (
                        <div className="flex justify-start">
                        <div className="bg-white p-3 rounded-2xl rounded-bl-none shadow-sm border border-gray-100 flex items-center gap-2">
                            <Icons.Loader className="w-4 h-4 animate-spin text-indigo-600" />
                            <span className="text-xs text-gray-500">Digitando...</span>
                        </div>
                        </div>
                    )}
                    </div>

                    <div className="p-4 bg-white border-t border-gray-100">
                    <div className="flex gap-2">
                        <input 
                        type="text" 
                        className="flex-1 border border-gray-300 rounded-full px-4 py-2 text-sm focus:outline-none focus:border-indigo-500"
                        placeholder="Ex: Moro em ap√™ pequeno..."
                        value={input}
                        onChange={(e) => setInput(e.target.value)}
                        onKeyPress={(e) => e.key === 'Enter' && handleSend()}
                        />
                        <button 
                        onClick={handleSend}
                        disabled={loading}
                        className="bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded-full disabled:opacity-50 transition-colors"
                        >
                        <Icons.Send className="w-5 h-5" />
                        </button>
                    </div>
                    </div>
                </div>
                </div>
            );
        };

        const PetCard = ({ pet, onClick }) => {
            return (
                <div 
                onClick={() => onClick(pet)}
                className="group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden cursor-pointer border border-gray-100 transform hover:-translate-y-1"
                >
                <div className="relative h-56 overflow-hidden">
                    <img 
                    src={pet.image} 
                    alt={pet.name} 
                    className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                    />
                    <div className="absolute top-3 right-3 bg-white/90 backdrop-blur-sm p-2 rounded-full shadow-sm text-rose-500">
                    <Icons.Heart className="w-5 h-5" />
                    </div>
                    <div className="absolute bottom-3 left-3">
                    <Badge color={pet.type === 'dog' ? 'blue' : 'orange'}>
                        {pet.type === 'dog' ? 'C√£o' : 'Gato'}
                    </Badge>
                    </div>
                </div>
                
                <div className="p-5">
                    <div className="flex justify-between items-start mb-2">
                    <h3 className="text-xl font-bold text-gray-800">{pet.name}</h3>
                    <span className="text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded">{pet.age}</span>
                    </div>
                    
                    <p className="text-sm text-gray-500 font-medium mb-3">{pet.breed}</p>
                    
                    <div className="flex items-center text-gray-500 text-sm gap-1 mt-auto">
                    <Icons.MapPin className="w-4 h-4 text-indigo-500" />
                    {pet.location}
                    </div>
                </div>
                </div>
            );
        };

        const RegisterForm = ({ onCancel, onSubmit }) => {
            const [formData, setFormData] = useState({
                name: '',
                type: 'dog',
                breed: '',
                age: '',
                location: '',
                contact: '',
                description: ''
            });
            const [isGenerating, setIsGenerating] = useState(false);

            const handleGenerateDescription = async () => {
                if (!formData.name || !formData.breed) {
                alert("Por favor, preencha pelo menos o Nome e a Ra√ßa para gerar a descri√ß√£o.");
                return;
                }
                
                setIsGenerating(true);
                const prompt = `Escreva uma bio de ado√ß√£o curta, criativa e emocionante (m√°ximo 3 linhas) para um ${formData.type === 'dog' ? 'cachorro' : 'gato'} chamado ${formData.name}, da ra√ßa ${formData.breed}, idade ${formData.age || 'desconhecida'}. O tom deve ser amoroso e incentivar a ado√ß√£o.`;
                
                const generatedText = await callGemini(prompt);
                setFormData(prev => ({ ...prev, description: generatedText }));
                setIsGenerating(false);
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                const newPet = {
                ...formData,
                id: Date.now(),
                image: formData.type === 'dog' 
                    ? "https://images.unsplash.com/photo-1543466835-00a7907e9de1?auto=format&fit=crop&q=80&w=1000" 
                    : "https://images.unsplash.com/photo-1574158622682-e40e69881006?auto=format&fit=crop&q=80&w=1000",
                owner: "Voc√™",
                vaccinated: false,
                castrated: false,
                gender: "Desconhecido",
                size: "M√©dio"
                };
                onSubmit(newPet);
            };

            return (
                <div className="max-w-2xl mx-auto bg-white p-8 rounded-2xl shadow-lg border border-gray-100 animate-fade-in">
                <div className="text-center mb-8">
                    <h2 className="text-3xl font-bold text-gray-800 mb-2">Cadastrar um Amigo</h2>
                    <p className="text-gray-600">Ajude um animalzinho a encontrar um novo lar preenchendo as informa√ß√µes abaixo.</p>
                </div>

                <form onSubmit={handleSubmit} className="space-y-6">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div className="col-span-2 flex justify-center mb-4">
                        <div className="w-32 h-32 bg-gray-100 rounded-full flex items-center justify-center border-2 border-dashed border-gray-300 text-gray-400 hover:border-indigo-500 hover:text-indigo-500 transition-colors cursor-pointer">
                        <div className="text-center">
                            <Icons.Camera className="w-8 h-8 mx-auto mb-1" />
                            <span className="text-xs">Adicionar Foto</span>
                        </div>
                        </div>
                    </div>

                    <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Nome do Pet</label>
                        <input 
                        required
                        type="text" 
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all"
                        placeholder="Ex: Rex"
                        value={formData.name}
                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                        />
                    </div>

                    <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Tipo</label>
                        <select 
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all"
                        value={formData.type}
                        onChange={(e) => setFormData({...formData, type: e.target.value})}
                        >
                        <option value="dog">C√£o</option>
                        <option value="cat">Gato</option>
                        </select>
                    </div>

                    <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Ra√ßa (ou SRD)</label>
                        <input 
                        required
                        type="text" 
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all"
                        placeholder="Ex: Vira-lata"
                        value={formData.breed}
                        onChange={(e) => setFormData({...formData, breed: e.target.value})}
                        />
                    </div>

                    <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Idade Aproximada</label>
                        <input 
                        required
                        type="text" 
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all"
                        placeholder="Ex: 2 anos"
                        value={formData.age}
                        onChange={(e) => setFormData({...formData, age: e.target.value})}
                        />
                    </div>

                    <div className="col-span-2">
                        <label className="block text-sm font-medium text-gray-700 mb-1">Localiza√ß√£o (Cidade/Estado)</label>
                        <div className="relative">
                        <Icons.MapPin className="absolute left-3 top-2.5 w-5 h-5 text-gray-400" />
                        <input 
                            required
                            type="text" 
                            className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all"
                            placeholder="Ex: S√£o Paulo, SP"
                            value={formData.location}
                            onChange={(e) => setFormData({...formData, location: e.target.value})}
                        />
                        </div>
                    </div>

                    <div className="col-span-2">
                        <div className="flex justify-between items-center mb-1">
                        <label className="block text-sm font-medium text-gray-700">Descri√ß√£o</label>
                        <button 
                            type="button"
                            onClick={handleGenerateDescription}
                            disabled={isGenerating}
                            className="text-xs flex items-center gap-1 text-indigo-600 font-semibold hover:text-indigo-800 disabled:opacity-50 transition-colors"
                        >
                            {isGenerating ? (
                            <Icons.Loader className="w-3 h-3 animate-spin" />
                            ) : (
                            <Icons.Sparkles className="w-3 h-3" />
                            )}
                            {isGenerating ? 'Escrevendo...' : 'Gerar com IA'}
                        </button>
                        </div>
                        <textarea 
                        required
                        rows="3"
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all"
                        placeholder="Conte um pouco sobre a personalidade dele... ou use a IA para ajudar!"
                        value={formData.description}
                        onChange={(e) => setFormData({...formData, description: e.target.value})}
                        ></textarea>
                    </div>
                    </div>

                    <div className="flex gap-4 pt-4">
                    <button 
                        type="button" 
                        onClick={onCancel}
                        className="flex-1 py-3 px-6 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-colors"
                    >
                        Cancelar
                    </button>
                    <button 
                        type="submit" 
                        className="flex-1 py-3 px-6 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 shadow-md hover:shadow-lg transition-all"
                    >
                        Cadastrar Pet
                    </button>
                    </div>
                </form>
                </div>
            );
        };

        const App = () => {
            const [pets, setPets] = useState(INITIAL_PETS);
            const [filteredPets, setFilteredPets] = useState(INITIAL_PETS);
            const [selectedPet, setSelectedPet] = useState(null);
            const [view, setView] = useState('home'); // 'home' | 'register'
            const [searchTerm, setSearchTerm] = useState('');
            const [filterType, setFilterType] = useState('all'); // 'all' | 'dog' | 'cat'
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            const [showAdvisor, setShowAdvisor] = useState(false);

            useEffect(() => {
                let result = pets;

                if (filterType !== 'all') {
                result = result.filter(pet => pet.type === filterType);
                }

                if (searchTerm) {
                const lowerTerm = searchTerm.toLowerCase();
                result = result.filter(pet => 
                    pet.name.toLowerCase().includes(lowerTerm) || 
                    pet.breed.toLowerCase().includes(lowerTerm) ||
                    pet.location.toLowerCase().includes(lowerTerm)
                );
                }

                setFilteredPets(result);
            }, [pets, searchTerm, filterType]);

            const handleRegisterPet = (newPet) => {
                setPets([newPet, ...pets]);
                setView('home');
                setFilterType('all');
                alert("Pet cadastrado com sucesso! üéâ");
            };

            return (
                <div className="min-h-screen bg-gray-50 font-sans text-gray-900">
                
                {/* Navigation */}
                <nav className="bg-white shadow-sm sticky top-0 z-40">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="flex justify-between h-16 items-center">
                        
                        {/* Logo */}
                        <div 
                        className="flex items-center gap-2 cursor-pointer" 
                        onClick={() => { setView('home'); window.scrollTo(0,0); }}
                        >
                        <div className="bg-indigo-600 p-2 rounded-lg">
                            <Icons.Dog className="w-6 h-6 text-white" />
                        </div>
                        <span className="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600">
                            EncontreUmAmigo
                        </span>
                        </div>

                        {/* Desktop Menu */}
                        <div className="hidden md:flex items-center space-x-6">
                        <button 
                            onClick={() => { setView('home'); setFilterType('all'); }}
                            className={`text-sm font-medium hover:text-indigo-600 transition-colors ${view === 'home' && filterType === 'all' ? 'text-indigo-600' : 'text-gray-500'}`}
                        >
                            In√≠cio
                        </button>
                        <button 
                            onClick={() => { setView('home'); setFilterType('dog'); }}
                            className={`text-sm font-medium hover:text-indigo-600 transition-colors ${filterType === 'dog' ? 'text-indigo-600' : 'text-gray-500'}`}
                        >
                            C√£es
                        </button>
                        <button 
                            onClick={() => { setView('home'); setFilterType('cat'); }}
                            className={`text-sm font-medium hover:text-indigo-600 transition-colors ${filterType === 'cat' ? 'text-indigo-600' : 'text-gray-500'}`}
                        >
                            Gatos
                        </button>
                        
                        {/* AI Feature Button */}
                        <button 
                            onClick={() => setShowAdvisor(true)}
                            className="text-sm font-medium text-indigo-600 hover:text-indigo-700 transition-colors flex items-center gap-1 bg-indigo-50 px-3 py-1.5 rounded-full border border-indigo-100"
                        >
                            <Icons.Sparkles className="w-3 h-3" />
                            Conselheiro IA
                        </button>

                        <button 
                            onClick={() => setView('register')}
                            className="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-full text-sm font-medium transition-all shadow-md hover:shadow-lg flex items-center gap-2"
                        >
                            <Icons.PlusCircle className="w-4 h-4" /> Quero Doar
                        </button>
                        </div>

                        {/* Mobile Menu Button */}
                        <div className="md:hidden flex items-center">
                        <button 
                            onClick={() => setMobileMenuOpen(!mobileMenuOpen)} 
                            className="text-gray-500 hover:text-gray-700 p-2"
                        >
                            {mobileMenuOpen ? <Icons.X className="w-6 h-6" /> : <Icons.Menu className="w-6 h-6" />}
                        </button>
                        </div>
                    </div>
                    </div>

                    {/* Mobile Menu Dropdown */}
                    {mobileMenuOpen && (
                    <div className="md:hidden bg-white border-t border-gray-100">
                        <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                        <button onClick={() => { setView('home'); setMobileMenuOpen(false); }} className="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50 w-full text-left">In√≠cio</button>
                        <button onClick={() => { setView('home'); setFilterType('dog'); setMobileMenuOpen(false); }} className="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50 w-full text-left">C√£es</button>
                        <button onClick={() => { setView('home'); setFilterType('cat'); setMobileMenuOpen(false); }} className="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50 w-full text-left">Gatos</button>
                        <button onClick={() => { setShowAdvisor(true); setMobileMenuOpen(false); }} className="block px-3 py-2 rounded-md text-base font-medium text-indigo-600 hover:bg-indigo-50 w-full text-left flex items-center gap-2"><Icons.Sparkles className="w-4 h-4"/> Conselheiro IA</button>
                        <button onClick={() => { setView('register'); setMobileMenuOpen(false); }} className="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-indigo-600 bg-indigo-50 hover:bg-indigo-100 mt-2">Quero Doar</button>
                        </div>
                    </div>
                    )}
                </nav>

                {/* Main Content */}
                <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    
                    {view === 'home' && (
                    <>
                        {/* Hero Section */}
                        <div className="relative rounded-3xl overflow-hidden bg-indigo-600 text-white mb-10 shadow-xl">
                        <div className="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1450778869180-41d0601e046e?auto=format&fit=crop&q=80&w=2000')] bg-cover bg-center opacity-20"></div>
                        <div className="relative z-10 px-8 py-16 md:py-20 text-center md:text-left md:flex md:items-center md:justify-between">
                            <div className="md:max-w-xl">
                            <h1 className="text-4xl md:text-5xl font-extrabold tracking-tight mb-4 leading-tight">
                                N√£o compre, <br/>
                                <span className="text-indigo-200">adote um amigo.</span>
                            </h1>
                            <p className="text-lg text-indigo-100 mb-8 font-light">
                                Milhares de c√£es e gatos est√£o esperando por um lar amoroso. 
                                Encontre o seu companheiro perfeito hoje mesmo.
                            </p>
                            
                            {/* Search Bar */}
                            <div className="bg-white p-2 rounded-full shadow-lg flex items-center max-w-md w-full">
                                <Icons.Search className="w-5 h-5 text-gray-400 ml-3" />
                                <input 
                                type="text" 
                                placeholder="Busque por ra√ßa, nome ou cidade..."
                                className="flex-1 px-4 py-2 outline-none text-gray-700 placeholder-gray-400"
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                />
                            </div>
                            </div>
                        </div>
                        </div>

                        {/* Filters & Content */}
                        <div className="mb-8 flex flex-col sm:flex-row justify-between items-center gap-4">
                        <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
                            <Icons.Heart className="w-6 h-6 text-rose-500 fill-current" /> 
                            Amigos dispon√≠veis ({filteredPets.length})
                        </h2>
                        
                        <div className="flex gap-2 bg-white p-1 rounded-lg shadow-sm border border-gray-200">
                            <button 
                            onClick={() => setFilterType('all')}
                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${filterType === 'all' ? 'bg-gray-800 text-white shadow' : 'text-gray-500 hover:bg-gray-50'}`}
                            >
                            Todos
                            </button>
                            <button 
                            onClick={() => setFilterType('dog')}
                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${filterType === 'dog' ? 'bg-blue-600 text-white shadow' : 'text-gray-500 hover:bg-gray-50'}`}
                            >
                            C√£es
                            </button>
                            <button 
                            onClick={() => setFilterType('cat')}
                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${filterType === 'cat' ? 'bg-orange-500 text-white shadow' : 'text-gray-500 hover:bg-gray-50'}`}
                            >
                            Gatos
                            </button>
                        </div>
                        </div>

                        {/* Grid */}
                        {filteredPets.length > 0 ? (
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                            {filteredPets.map(pet => (
                            <PetCard key={pet.id} pet={pet} onClick={setSelectedPet} />
                            ))}
                        </div>
                        ) : (
                        <div className="text-center py-20">
                            <div className="bg-gray-100 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4">
                            <Icons.Search className="w-10 h-10 text-gray-400" />
                            </div>
                            <h3 className="text-xl font-medium text-gray-900">Nenhum amigo encontrado</h3>
                            <p className="text-gray-500 mt-2">Tente mudar os filtros ou o termo de busca.</p>
                            <button 
                            onClick={() => {setFilterType('all'); setSearchTerm('')}}
                            className="mt-6 text-indigo-600 font-medium hover:underline"
                            >
                            Limpar filtros
                            </button>
                        </div>
                        )}
                    </>
                    )}

                    {view === 'register' && (
                    <RegisterForm 
                        onCancel={() => setView('home')} 
                        onSubmit={handleRegisterPet} 
                    />
                    )}

                </main>

                {/* Footer */}
                <footer className="bg-white border-t border-gray-200 mt-12 py-12">
                    <div className="max-w-7xl mx-auto px-4 text-center">
                    <div className="flex justify-center items-center gap-2 mb-4">
                        <div className="bg-indigo-600 p-1.5 rounded-md">
                        <Icons.Dog className="w-5 h-5 text-white" />
                        </div>
                        <span className="text-lg font-bold text-gray-800">EncontreUmAmigo</span>
                    </div>
                    <p className="text-gray-500 text-sm max-w-md mx-auto mb-6">
                        Conectando cora√ß√µes e patas. Este projeto √© uma iniciativa open-source para facilitar a ado√ß√£o de animais em todo o Brasil.
                    </p>
                    <div className="flex justify-center gap-6 text-gray-400">
                        <span className="hover:text-indigo-600 cursor-pointer transition-colors">Sobre n√≥s</span>
                        <span className="hover:text-indigo-600 cursor-pointer transition-colors">Dicas de Ado√ß√£o</span>
                        <span className="hover:text-indigo-600 cursor-pointer transition-colors">Contato</span>
                    </div>
                    <p className="text-gray-400 text-xs mt-8">
                        ¬© 2024 EncontreUmAmigo. Feito com ‚ù§Ô∏è para os pets.
                    </p>
                    </div>
                </footer>

                {/* Modal Pet Details */}
                {selectedPet && (
                    <Modal pet={selectedPet} onClose={() => setSelectedPet(null)} />
                )}

                {/* Modal AI Advisor */}
                {showAdvisor && (
                    <AdvisorModal onClose={() => setShowAdvisor(false)} />
                )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
